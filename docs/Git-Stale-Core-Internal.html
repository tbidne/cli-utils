<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Git.Stale.Core.Internal</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cli-utils-4.1.0</span><ul class="links" id="page-menu"><li><a href="src/Git.Stale.Core.Internal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>tbidne@gmail.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Git.Stale.Core.Internal</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Exports utility functions mainly for parsing/transforming
 between types/errors.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:badBranch">badBranch</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:exceptToErr">exceptToErr</a> :: <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a (<a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Git-Stale-Types-Error.html#t:Err" title="Git.Stale.Types.Error">Err</a> b) -&gt; <a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Git-Stale-Types-Error.html#t:Err" title="Git.Stale.Types.Error">Err</a> b</li><li class="src short"><a href="#v:parseLog">parseLog</a> :: <a href="Git-Types-GitTypes.html#t:NameLog" title="Git.Types.GitTypes">NameLog</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a></li><li class="src short"><a href="#v:parseAuthDateStr">parseAuthDateStr</a> :: <a href="Git-Types-GitTypes.html#t:NameLog" title="Git.Types.GitTypes">NameLog</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDateStr" title="Git.Types.GitTypes">NameAuthDateStr</a></li><li class="src short"><a href="#v:parseDay">parseDay</a> :: <a href="Git-Types-GitTypes.html#t:NameAuthDateStr" title="Git.Types.GitTypes">NameAuthDateStr</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a></li><li class="src short"><a href="#v:safeRead">safeRead</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:stale">stale</a> :: <a href="Common-RefinedUtils.html#t:RNonNegative" title="Common.RefinedUtils">RNonNegative</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../time-1.9.3/Data-Time-Calendar.html#t:Day" title="Data.Time.Calendar">Day</a> -&gt; <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a> -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:staleNonErr">staleNonErr</a> :: <a href="Common-RefinedUtils.html#t:RNonNegative" title="Common.RefinedUtils">RNonNegative</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../time-1.9.3/Data-Time-Calendar.html#t:Day" title="Data.Time.Calendar">Day</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a> -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:textToName">textToName</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:Name" title="Git.Types.GitTypes">Name</a></li><li class="src short"><a href="#v:unsafeToInt">unsafeToInt</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:badBranch" class="def">badBranch</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Git.Stale.Core.Internal.html#badBranch" class="link">Source</a> <a href="#v:badBranch" class="selflink">#</a></p><div class="doc"><p>Tests for bad branches based on presence of <em>*</em> and <em>&gt;</em>.</p></div></div><div class="top"><p class="src"><a id="v:exceptToErr" class="def">exceptToErr</a> :: <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a (<a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Git-Stale-Types-Error.html#t:Err" title="Git.Stale.Types.Error">Err</a> b) -&gt; <a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Git-Stale-Types-Error.html#t:Err" title="Git.Stale.Types.Error">Err</a> b <a href="src/Git.Stale.Core.Internal.html#exceptToErr" class="link">Source</a> <a href="#v:exceptToErr" class="selflink">#</a></p><div class="doc"><p>Joins nested <code><a href="../base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>s.</p></div></div><div class="top"><p class="src"><a id="v:parseLog" class="def">parseLog</a> :: <a href="Git-Types-GitTypes.html#t:NameLog" title="Git.Types.GitTypes">NameLog</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a> <a href="src/Git.Stale.Core.Internal.html#parseLog" class="link">Source</a> <a href="#v:parseLog" class="selflink">#</a></p><div class="doc"><p>Parses <code><a href="Git-Types-GitTypes.html#t:NameLog" title="Git.Types.GitTypes">NameLog</a></code> into <code><a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a></code>, recording errors
 as <code><a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:parseAuthDateStr" class="def">parseAuthDateStr</a> :: <a href="Git-Types-GitTypes.html#t:NameLog" title="Git.Types.GitTypes">NameLog</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDateStr" title="Git.Types.GitTypes">NameAuthDateStr</a> <a href="src/Git.Stale.Core.Internal.html#parseAuthDateStr" class="link">Source</a> <a href="#v:parseAuthDateStr" class="selflink">#</a></p><div class="doc"><p>Intermediate parsing of <code><a href="Git-Types-GitTypes.html#t:NameLog" title="Git.Types.GitTypes">NameLog</a></code> into <code><a href="Git-Types-GitTypes.html#t:NameAuthDateStr" title="Git.Types.GitTypes">NameAuthDateStr</a></code>,
 recording errors as <code><a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:parseDay" class="def">parseDay</a> :: <a href="Git-Types-GitTypes.html#t:NameAuthDateStr" title="Git.Types.GitTypes">NameAuthDateStr</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a> <a href="src/Git.Stale.Core.Internal.html#parseDay" class="link">Source</a> <a href="#v:parseDay" class="selflink">#</a></p><div class="doc"><p>Intermediate parsing of <code><a href="Git-Types-GitTypes.html#t:NameAuthDateStr" title="Git.Types.GitTypes">NameAuthDateStr</a></code> into <code><a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a></code>,
 recording errors as <code><a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:safeRead" class="def">safeRead</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Git.Stale.Core.Internal.html#safeRead" class="link">Source</a> <a href="#v:safeRead" class="selflink">#</a></p><div class="doc"><p>Safely reads <code><a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></code> into <code><a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a></code> <code><a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:stale" class="def">stale</a> :: <a href="Common-RefinedUtils.html#t:RNonNegative" title="Common.RefinedUtils">RNonNegative</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../time-1.9.3/Data-Time-Calendar.html#t:Day" title="Data.Time.Calendar">Day</a> -&gt; <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a> -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Git.Stale.Core.Internal.html#stale" class="link">Source</a> <a href="#v:stale" class="selflink">#</a></p><div class="doc"><p>Determines if <code><a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a></code> is stale given by</p><pre>stale lim day (_, _, d) &lt;=&gt; day - d &gt;= lim</pre></div></div><div class="top"><p class="src"><a id="v:staleNonErr" class="def">staleNonErr</a> :: <a href="Common-RefinedUtils.html#t:RNonNegative" title="Common.RefinedUtils">RNonNegative</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../time-1.9.3/Data-Time-Calendar.html#t:Day" title="Data.Time.Calendar">Day</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a> -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Git.Stale.Core.Internal.html#staleNonErr" class="link">Source</a> <a href="#v:staleNonErr" class="selflink">#</a></p><div class="doc"><p>For <code><a href="../base-4.13.0.0/Data-Either.html#v:Right" title="Data.Either">Right</a></code> <code><a href="Git-Types-GitTypes.html#t:NameAuthDay" title="Git.Types.GitTypes">NameAuthDay</a></code>, behaves the same as <code><a href="Git-Stale-Core-Internal.html#v:stale" title="Git.Stale.Core.Internal">stale</a></code>.
 But for <code><a href="../base-4.13.0.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> <code><a href="Git-Stale-Types-Error.html#t:Err" title="Git.Stale.Types.Error">Err</a></code> it is always true, since we do not want
 to filter out errors.</p></div></div><div class="top"><p class="src"><a id="v:textToName" class="def">textToName</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Git-Stale-Types-Error.html#t:ErrOr" title="Git.Stale.Types.Error">ErrOr</a> <a href="Git-Types-GitTypes.html#t:Name" title="Git.Types.GitTypes">Name</a> <a href="src/Git.Stale.Core.Internal.html#textToName" class="link">Source</a> <a href="#v:textToName" class="selflink">#</a></p><div class="doc"><p>Strips whitespace and potential git prefix (i.e. remotes/).
 Works for strings with no prefix and those that have the prefix
 exactly once, e.g.</p><pre>textToName &quot;branch&quot; -&gt; branch
textToName &quot;remotes/origin/branch&quot; -&gt; origin/branch
textToName &quot;blah/remotes/origin/branch&quot; -&gt; origin/branch</pre><p>Returns <code><a href="../base-4.13.0.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> <code><a href="Git-Stale-Types-Error.html#v:ParseName" title="Git.Stale.Types.Error">ParseName</a></code> if the prefix occurs more than once as we
 have definitely entered undefined territory.</p></div></div><div class="top"><p class="src"><a id="v:unsafeToInt" class="def">unsafeToInt</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Git.Stale.Core.Internal.html#unsafeToInt" class="link">Source</a> <a href="#v:unsafeToInt" class="selflink">#</a></p><div class="doc"><p>Unsafely reads <code><a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></code> to <code><a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>